/*
 * gpio_cfg.c
 *
 *  Created on: Feb 27, 2024
 *      Author: Gabor
 */

#include <drv_gpio.h>
#include "iodef.h"

GOS_EXTERN void_t gpio_cfgButton1Callback (void_t);
GOS_EXTERN void_t gpio_cfgUserButtonCallback (void_t);

/**
 * TODO
 */
GOS_CONST drv_gpioDescriptor_t gpioConfig [] =
{
		[IO_USER_LED] =
		{
			.port = GPIOA,
			.pin = GPIO_PIN_5,
			.mode = GPIO_MODE_OUTPUT_PP,
			.pull = GPIO_NOPULL,
		},
		[IO_USER_BUTTON] =
		{
			.port = GPIOC,
			.pin = GPIO_PIN_13,
			.mode = GPIO_MODE_IT_FALLING,
			.pull = GPIO_NOPULL
		},
		[IO_UART_2_RX] =
		{
			.port = GPIOA,
			.pin = GPIO_PIN_3,
			.mode = GPIO_MODE_AF_PP,
			.pull = GPIO_NOPULL,
			.speed = GPIO_SPEED_FREQ_VERY_HIGH,
			.alternate = GPIO_AF7_USART2
		},
		[IO_UART_2_TX] =
		{
			.port = GPIOA,
			.pin = GPIO_PIN_2,
			.mode = GPIO_MODE_AF_PP,
			.pull = GPIO_NOPULL,
			.speed = GPIO_SPEED_FREQ_VERY_HIGH,
			.alternate = GPIO_AF7_USART2
		},
		[IO_UART_5_RX] =
		{
			.port = GPIOD,
			.pin = GPIO_PIN_2,
			.mode = GPIO_MODE_AF_PP,
			.pull = GPIO_NOPULL,
			.speed = GPIO_SPEED_FREQ_VERY_HIGH,
			.alternate = GPIO_AF8_UART5
		},
		[IO_UART_5_TX] =
		{
			.port = GPIOC,
			.pin = GPIO_PIN_12,
			.mode = GPIO_MODE_AF_PP,
			.pull = GPIO_NOPULL,
			.speed = GPIO_SPEED_FREQ_VERY_HIGH,
			.alternate = GPIO_AF8_UART5
		},
};

/**
 * TODO
 */
u32_t gpioConfigSize = sizeof(gpioConfig);

GOS_CONST drv_gpioItCallbackDescriptor_t gpioItConfig [] =
{
	{
		.callback = gpio_cfgButton1Callback,
		.pin      = gpioConfig[IO_BUTTON_1].pin
	},
	{
		.callback = gpio_cfgUserButtonCallback,
		.pin      = gpioConfig[IO_USER_BUTTON].pin
	}
};

u32_t gpioItConfigSize = sizeof(gpioItConfig);
